<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Voxel counting and fractal geometry • rTLS</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Voxel counting and fractal geometry">
<meta property="og:description" content="rTLS">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-W6KLJNB4MN"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-W6KLJNB4MN');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rTLS</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home"></span>
     
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Artificial-stands.html">Creation of artificial stands</a>
    </li>
    <li>
      <a href="../articles/tree-metrics.html">Estimation of tree metrics</a>
    </li>
    <li>
      <a href="../articles/voxels-fractals.html">Voxel counting and fractal geometry</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fas fa-file-code-o"></span>
     
    Functions
  </a>
</li>
<li>
  <a href="https://github.com/Antguz/rTLS/">
    <span class="fas fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="voxels-fractals_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Voxel counting and fractal geometry</h1>
            
            <h4 class="date">2020-04-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Antguz/rTLS/blob/master/vignettes/voxels-fractals.Rmd"><code>vignettes/voxels-fractals.Rmd</code></a></small>
      <div class="hidden name"><code>voxels-fractals.Rmd</code></div>

    </div>

    
    
<p>The following examples demonstrates how to use the <code>voxel_counting</code> function of <code>rTLS</code> package to estimate the fractal geometry (Minkowski–Bouligand dimension) of point clouds. In general, this function is based on <code>voxel</code> (also from <code>rTLS</code>) and summarize the properties of the voxelization using different scales.</p>
<div id="background" class="section level2">
<h2 class="hasAnchor">
<a href="#background" class="anchor"></a>Background</h2>
<p>The Minkowski–Bouligand dimension, or commonly known as the box-counting method, is a way of sampling complex patterns in a given object by breaking the object into smaller and smaller boxes while extracting the rate of change. Here because we are dealing with point clouds with three dimensions, voxels of a given volume are used instead of boxes.</p>
<p>In practice, a given point cloud can be covered using a single large voxel (N<sub>1</sub> = 1) of size S<sub>1</sub>, but as S is reduced in volume (S<sub>1</sub> &gt; S<sub>2</sub> … &gt; S<sub>n</sub>), the number of voxels required (N &gt; 1) to cover it will increase. Since N increases as a power function, it is positive to estimate the Minkowski-Boulingand dimension by a log-log linear model. This can be done by <code>rTLS</code> following the next steps.</p>
</div>
<div id="steps" class="section level2">
<h2 class="hasAnchor">
<a href="#steps" class="anchor"></a>Steps</h2>
<ol style="list-style-type: decimal">
<li>Read the file</li>
</ol>
<p>First, we need to read the point clouds in R. This can be done using the function <code>fread</code> of <code>data.table</code> for a fast reading or any other traditional approach for reading tables.</p>
<p>For this example specifically, we will use a point cloud already embedded in <code>rTLS</code>, <code>pc_tree</code>. This point cloud was created from a group of scans of a tree. It has a coarse resolution of 0.05 m for TLS standards in order to integrate it as an example into the package. The file can be load following:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Antguz/rTLS">rTLS</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">pc_tree</span><span class="op">)</span>

<span class="co">#Visualize the point cloud</span>
<span class="fu">rgl</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgl/man/plot3d.html">plot3d</a></span><span class="op">(</span><span class="va">pc_tree</span><span class="op">)</span></code></pre></div>
<hr>
<ol start="2" style="list-style-type: decimal">
<li>Run <code>voxel_counting</code>
</li>
</ol>
<p>The following step is running <code>voxel_counting</code>. In order to estimate the fractal geometry we need to consider a series of requirements. Specifically we need to consider the minimum and maximum voxel edge length (lower and upper cut-off), and the number of scales to perform. These are important steps since if the voxel edge length is lower than the minimum distance between points or higher than the largest range of XYZ we will loss the power-law relationship between the number of voxels and the voxel size. Using <code>voxel_counting</code> we can define both requirements using <code>voxel.sizes</code> manually, or if this is null, we can define the number of scales to use by <code>length.out</code> and selecting the minimum voxel size by <code>min.size</code>. If <code>voxel.sizes = NULL</code>, the function selects the maximum voxel size based on the largest range of XYZ. Since the resolution of the point cloud is 0.05 m we can use this as a value value of minimum voxel size. This can be performed following:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">fractals</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/voxels_counting.html">voxels_counting</a></span><span class="op">(</span><span class="va">pc_tree</span>, min.size <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></code></pre></div>
<p>Other ways to select the <code>min.size</code> is estimating the minimum distance between points. This can be done also using ‘min_distance’ function also from <code>rTLS</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co">#Regular processing</span>
<span class="va">low_size</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/min_distance.html">min_distance</a></span><span class="op">(</span><span class="va">pc_tree</span><span class="op">)</span>

<span class="co">#or using parallel processing</span>
<span class="va">low_size</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/min_distance.html">min_distance</a></span><span class="op">(</span><span class="va">pc_tree</span>, threads <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></code></pre></div>
<hr>
<ol start="3" style="list-style-type: decimal">
<li>Estimation of the fractal geometry by voxel counting</li>
</ol>
<p>Using the outputs of <code>voxel_counting</code> is then possible to estimate the fractal geometry. As mentioned before, this can be done by fitting a log-log regression between N (<code>fractals$N_voxels</code>) and S (<code>fractals$Voxel.size^3</code>). In practice, the Minkowski–Bouligand dimension is estimated using 1/S in order to obtain positive slopes. This can be done following:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">dimention</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log10</a></span><span class="op">(</span><span class="va">N_voxels</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log10</a></span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="va">Edge.X</span><span class="op">*</span><span class="va">Edge.Y</span><span class="op">*</span><span class="va">Edge.Z</span><span class="op">)</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">fractals</span><span class="op">)</span></code></pre></div>
<p>The coefficients from this relationship represent the fractal dimension (d<sub>MB</sub>;<code>dimention$coefficients[2]</code>) and the intercept (intercept<sub>MB</sub>;, <code>dimention$coefficients[1]</code>). In general, the resulting d<sub>MB</sub> may have a value between 0 and 1, where values close to 1 represents a tree that uniformly occupies their 3D space (such as a Menger sponge with the greatest surface‐to‐volume ratio), while values close to 0 represents a cylindrical tree (such as a pole‐like object) or a point cloud with two points. On the other hand, the intercept<sub>MB</sub> may have positive and negative values, where high values tend to be associated with large objects that require several voxels to fill at different scales.</p>
<hr>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by J. Antonio Guzmán Q., Ronny Hernandez.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
