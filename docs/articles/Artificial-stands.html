<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creation of artificial stands â€¢ rTLS</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Creation of artificial stands">
<meta property="og:description" content="rTLS">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-W6KLJNB4MN"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-W6KLJNB4MN');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rTLS</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home"></span>
     
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Artificial-stands.html">Creation of artificial stands</a>
    </li>
    <li>
      <a href="../articles/tree-metrics.html">Estimation of tree metrics</a>
    </li>
    <li>
      <a href="../articles/voxels-fractals.html">Voxel counting and fractal geometry</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fas fa-file-code-o"></span>
     
    Functions
  </a>
</li>
<li>
  <a href="https://github.com/Antguz/rTLS/">
    <span class="fas fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Artificial-stands_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Creation of artificial stands</h1>
            
            <h4 class="date">2020-04-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Antguz/rTLS/blob/master/vignettes/Artificial-stands.Rmd"><code>vignettes/Artificial-stands.Rmd</code></a></small>
      <div class="hidden name"><code>Artificial-stands.Rmd</code></div>

    </div>

    
    
<p>The following examples demonstrates how to use the <code>artificial_stand</code> function of <code>rTLS</code> package to simulate potential stands based on tree point clouds.</p>
<div id="motivation" class="section level2">
<h2 class="hasAnchor">
<a href="#motivation" class="anchor"></a>Motivation</h2>
<p>In general, the scanning of a plot using TLS is a time-consuming work that usually requires several people and steps to achieve a quality product. In studies where plots are the sample units, the scanning of several plots is a considerable challenge to answer specific questions. The idea behind <code>artificial_stand</code> is to provide a general overview of artificial stands that can be created and modified by users; allowing us to recreate potential scenarios of the spatial variation of the forest structure. To archive this, users can select several arguments related to the number of tree point clouds to use, the future coordinates of the trees in the stands, or the plot size, to mention some.</p>
</div>
<div id="steps" class="section level2">
<h2 class="hasAnchor">
<a href="#steps" class="anchor"></a>Steps</h2>
<ol style="list-style-type: decimal">
<li>Selection of files.</li>
</ol>
<p>Since the <code>artificial_stand</code> function is focused on tree point clouds, users should first define the location of point clouds files to use. This needs to be a vector defining the their names and where the files are located if these are not in the working directory. These files may have any ASCII format and these will be read it in <code>artificial_stand</code> using the <code>fread</code> function of <code>data.table</code>. You could define the specific delimited format of the files using the <code>...</code> argument passed to <code>fread</code>.</p>
<div style="page-break-after: always;"></div>
<p>As an example, here we will use a tree point cloud already embedded in <code>rTLS</code>, <code>pc_tree.txt</code>. This file is located in the extdata of <code>rTLS</code>, following:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Antguz/rTLS">rTLS</a></span><span class="op">)</span>
<span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"pc_tree.txt"</span>, package <span class="op">=</span> <span class="st">"rTLS"</span><span class="op">)</span></code></pre></div>
<p>The structure of the location vector should be similar than <code>path</code> depending on the number and identify of point clouds for the future artificial stand. For example, if the user wants a stand with four different tree, the <code>path</code> vector should have paths for four different files. On the other hand, if the user wants a stand with four trees regardless their identity, the user can set the argument <code>sample = TRUE</code> in order to use the same path four different times. Users can also select the argument <code>replace = TRUE</code> in order to do a sample selection with replacement in scenarios when you have more paths than the number of trees required.</p>
<hr>
<ol start="2" style="list-style-type: decimal">
<li>Plot size.</li>
</ol>
<p>In order to select the plot size of the future artificial stands users can use the argument <code>dimension</code>. This need to be a vector of length two defining the width and length of the plot. It is expected that the unit scale of the point could files match with the unit scale for plot. An example for an hectare plot could be:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">plot_size</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">100</span><span class="op">)</span></code></pre></div>
<hr>
<ol start="3" style="list-style-type: decimal">
<li>Number of trees and their coordinates.</li>
</ol>
<p>Then the number of trees for the future stand may depends on the arguments previously described in the selection of files. For this example, letâ€™s assume that we want to create a stand of 10 trees using the same point cloud. This can be done following <code>n.trees = 10</code>.</p>
<p>The location of these trees in the future artificial stand could be random or could be previously defined. In order to provide random coordinates to the trees in the future stands we most use <code>coordinates = NULL</code>. On the other hand, if we want to provide specific coordinates we should add a <code>data.table</code> of two columns and with  equal to  describing the basal XYZ coordinates of the point clouds in the future stand.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Number of trees</span>
<span class="va">trees</span> <span class="op">&lt;-</span> <span class="fl">10</span>

<span class="co">#Random coordinates </span>
<span class="va">coor_1</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>

<span class="co">#Predefined coordinates</span>
<span class="va">coor_2</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="op">(</span>X <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">30</span>, <span class="fl">30</span>, <span class="fl">50</span>, <span class="fl">50</span>, <span class="fl">70</span>, <span class="fl">70</span>, <span class="fl">90</span>, <span class="fl">90</span><span class="op">)</span>, Y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">75</span>, <span class="fl">25</span>, <span class="fl">75</span>, <span class="fl">25</span>, <span class="fl">75</span>, <span class="fl">25</span>, <span class="fl">75</span>, <span class="fl">25</span>, <span class="fl">75</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<hr>
<ol start="3" style="list-style-type: decimal">
<li>Other arguments</li>
</ol>
<p>Users should define other arguments related with the potential overlap of crowns if they use random coordinates using the <code>overlap</code> argument. In addition, user should also define if they want a random or specific rotation angles in the yaw axis of the point cloud. If the users wants a specific angle of rotation in their point clouds these need to be defined in the degrees argument using vector describing the degrees of rotation. An example of all of this could be:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 5% of overlaping between crowns</span>
<span class="va">overl</span> <span class="op">&lt;-</span> <span class="fl">5</span>

<span class="co"># Trees without rotation</span>
<span class="va">rota_1</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span>

<span class="co"># Trees with random rotation  </span>
<span class="va">rota_2</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span>
<span class="va">degreess_1</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>

<span class="co"># Trees with rotation and specific angles</span>
<span class="va">rota_3</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span>
<span class="va">degreess_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">360</span>, length.out <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
<hr>
<ol start="4" style="list-style-type: decimal">
<li>Run artificial stands.</li>
</ol>
<p>Once users have selected their arguments related to the point cloud paths, number of trees, plot size, and tree coordinates it is possible to run <code>artifical_stands</code>. Following our example of 10 trees using the same point cloud in an hectare plot we should have the following:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># A total random artifical stand</span>
<span class="va">stand_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/artificial_stand.html">artificial_stand</a></span><span class="op">(</span><span class="va">path</span>, n.trees <span class="op">=</span> <span class="va">trees</span>, dimension <span class="op">=</span> <span class="va">plot_size</span>, coordinates <span class="op">=</span> <span class="va">coor_1</span>, overlap <span class="op">=</span> <span class="va">overl</span>, sample <span class="op">=</span> <span class="cn">TRUE</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># An artifical stand with defined tree coordinates and random tree rotation </span>
<span class="va">stand_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/artificial_stand.html">artificial_stand</a></span><span class="op">(</span><span class="va">path</span>, n.trees <span class="op">=</span> <span class="va">trees</span>, dimension <span class="op">=</span> <span class="va">plot_size</span>, coordinates <span class="op">=</span> <span class="va">coor_2</span>, sample <span class="op">=</span> <span class="cn">TRUE</span>, replace <span class="op">=</span> <span class="cn">TRUE</span>, rotation <span class="op">=</span> <span class="va">rota_2</span>, degrees <span class="op">=</span> <span class="va">degreess_1</span><span class="op">)</span>

<span class="co"># An artifical stand with defined tree coordinates and defined tree rotation</span>
<span class="va">stand_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/artificial_stand.html">artificial_stand</a></span><span class="op">(</span><span class="va">path</span>, n.trees <span class="op">=</span> <span class="va">trees</span>, dimension <span class="op">=</span> <span class="va">plot_size</span>, coordinates <span class="op">=</span> <span class="va">coor_2</span>, sample <span class="op">=</span> <span class="cn">TRUE</span>, replace <span class="op">=</span> <span class="cn">TRUE</span>, rotation <span class="op">=</span> <span class="va">rota_3</span>, degrees <span class="op">=</span> <span class="va">degreess_2</span><span class="op">)</span>

<span class="co"># An artifical stand with defined tree coordinates and without tree rotation</span>
<span class="va">stand_4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/artificial_stand.html">artificial_stand</a></span><span class="op">(</span><span class="va">path</span>, n.trees <span class="op">=</span> <span class="va">trees</span>, dimension <span class="op">=</span> <span class="va">plot_size</span>, coordinates <span class="op">=</span> <span class="va">coor_2</span>, sample <span class="op">=</span> <span class="cn">TRUE</span>, replace <span class="op">=</span> <span class="cn">TRUE</span>, rotation <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p>The resulting output of this function is a list that contains:</p>
<ul>
<li>Stand: basic information about the artificial stand (e.i. number of trees, plot size, total number of points, covered and total crown area)</li>
<li>Trees: A vector that describe the tree point clouds (e.i. tree ID, file path, tree coordinate in the plot, and crown area, and tree height)</li>
<li>Cloud: The point could of the artificial stand with the XYZ coordinate and the tree ID.</li>
</ul>
<hr>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by J. Antonio GuzmÃ¡n Q., Ronny Hernandez.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
