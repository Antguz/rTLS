<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>K Nearest Neighbors — knn • rTLS</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="K Nearest Neighbors — knn" />
<meta property="og:description" content="K nearest neighbors based on FLANN C++" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-W6KLJNB4MN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-W6KLJNB4MN');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rTLS</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.3.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home"></span>
     
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Artificial-stands.html">Creation of artificial stands</a>
    </li>
    <li>
      <a href="../articles/tree-metrics.html">Estimation of tree metrics</a>
    </li>
    <li>
      <a href="../articles/voxels-fractals.html">Voxel counting and fractal geometry</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fas fa-file-code-o"></span>
     
    Functions
  </a>
</li>
<li>
  <a href="https://github.com/Antguz/rTLS/">
    <span class="fas fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>K Nearest Neighbors</h1>
    <small class="dont-index">Source: <a href='https://github.com/Antguz/rTLS/blob/master/R/knn.R'><code>R/knn.R</code></a></small>
    <div class="hidden name"><code>knn.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>K nearest neighbors based on FLANN C++</p>
    </div>

    <pre class="usage"><span class='fu'>knn</span><span class='op'>(</span><span class='va'>query</span>, <span class='va'>ref</span>, <span class='va'>k</span>, same <span class='op'>=</span> <span class='cn'>FALSE</span>, build <span class='op'>=</span> <span class='st'>"kdtree"</span>, threads <span class='op'>=</span> <span class='fl'>1L</span>, checks <span class='op'>=</span> <span class='fl'>1L</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>query</th>
      <td><p>A <code>data.table</code> containing the set of query points where each row represent a point and each column a given coordinate.</p></td>
    </tr>
    <tr>
      <th>ref</th>
      <td><p>A <code>numeric</code> containing the set of reference points where each row represent a point and each column a given coordinate.</p></td>
    </tr>
    <tr>
      <th>k</th>
      <td><p>An <code>integer</code> describing the number of nearest neighbors to search for.</p></td>
    </tr>
    <tr>
      <th>same</th>
      <td><p>Logic. If <code>TRUE</code>, it delete neighbors with distance of 0, useful when the k search is based on the same query.</p></td>
    </tr>
    <tr>
      <th>build</th>
      <td><p>A <code>character</code> describing the search structure to be used: "kdtree", "kmeans", "linear".</p></td>
    </tr>
    <tr>
      <th>threads</th>
      <td><p>An <code>integer</code> specifying the number of threads to use for parallel processing. Experiment to see what works best for your data on your hardware. If 0, then the maximum allowable cores are used.</p></td>
    </tr>
    <tr>
      <th>checks</th>
      <td><p>Number of checks during searching. Higher value gives better search precision but takes longer. See FLANN C++ manual for more details.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>data.table</code> with three columns describing the indices of the query, ref, and k neighbors and the distances.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function is based on the FLAAN C++ Library (Muja and Lowe 2009) for a fast
estimation of neighbors points. It is adapted from rflann (Muja, Lowe, Yee, 2018) to
simplify the workflow with TLS data. If you use this function, please consider cite
both documents.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Muja, M., Lowe, D.G. (2009). Fast approximate nearest neighbors with automatic algorithm configuration. VISAPP (1), 2(331-340), 2.</p>
<p>Muja, M., Lowe, D.G., Yee, J., (2018). rflann: Basic R Interface to the 'FLANN' C++ Library. R package version 1.6.0.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='radius_search.html'>radius_search</a></code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>J. Antonio Guzmán Q.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>#Point cloud</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"pc_tree"</span><span class='op'>)</span>

<span class='co'>#knn search using k = 3</span>
<span class='fu'>knn</span><span class='op'>(</span><span class='va'>pc_tree</span>, <span class='va'>pc_tree</span>, k <span class='op'>=</span> <span class='fl'>3</span>, same <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='st'>"kdtree"</span>, checks <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>
</div><div class='output co'>#&gt;         query   ref k_index    distance
#&gt;      1:     1     3       1 0.002586577
#&gt;      2:     1     2       2 0.005620912
#&gt;      3:     1    12       3 0.006598868
#&gt;      4:     2     8       1 0.002943683
#&gt;      5:     2     7       2 0.003253250
#&gt;     ---                                
#&gt; 227540: 75847 75848       2 0.002777766
#&gt; 227541: 75847 74605       3 0.002952626
#&gt; 227542: 75848 75847       1 0.002777766
#&gt; 227543: 75848 75846       2 0.003168111
#&gt; 227544: 75848 75842       3 0.004644131</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by J. Antonio Guzmán Q., Ronny Hernandez.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


